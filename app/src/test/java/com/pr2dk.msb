" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ht({type:"spacing",htmlBuilder:function(e,t){if($r.hasOwnProperty(e.text)){var r=$r[e.text].className||"";if("text"!==e.mode)return $e.makeSpan(["mspace",r],[$e.mathsym(e.text,e.mode,t)],t);var n=$e.makeOrd(e,t,"textord");return n.classes.push(r),n}if(jr.hasOwnProperty(e.text))return $e.makeSpan(["mspace",jr[e.text]],[],t);throw new X('Unknown type of space "'+e.text+'"')},mathmlBuilder:function(e,t){if($r.hasOwnProperty(e.text))return new Mt.MathNode("mtext",[new Mt.TextNode("\xa0")]);if(jr.hasOwnProperty(e.text))return new Mt.MathNode("mspace");throw new X('Unknown type of space "'+e.text+'"')}}),ht({type:"tag",mathmlBuilder:function(e,t){var r=new Mt.MathNode("mtable",[new Mt.MathNode("mlabeledtr",[new Mt.MathNode("mtd",[Nt(e.tag,t)]),new Mt.MathNode("mtd",[Nt(e.body,t)])])]);return r.setAttribute("side","right"),r}});var Zr={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Kr={"\\textbf":"textbf"},Jr={"\\textit":"textit"},Qr=function(e,t){var r=e.font;return r?Zr[r]?t.withTextFontFamily(Zr[r]):Kr[r]?t.withTextFontWeight(Kr[r]):t.withTextFontShape(Jr[r]):t};lt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textit"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0,consumeMode:"text"},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];return{type:"text",mode:r.mode,body:mt(i),font:n}},htmlBuilder:function(e,t){var r=Qr(e,t),n=dt(e.body,r,!0);return $e.makeSpan(["mord","text"],$e.tryCombineChars(n),r)},mathmlBuilder:function(e,t){var r=Qr(e,t);return Nt(e.body,r)}}),lt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){return{type:"underline",mode:e.parser.mode,body:t[0]}},htmlBuilder:function(e,t){var r=bt(e.body,t),n=$e.makeLineSpan("underline-line",t),i=$e.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:n.height},{type:"elem",elem:n},{type:"kern",size:3*n.height},{type:"elem",elem:r}]},t);return $e.makeSpan(["mord","underline"],[i],t)},mathmlBuilder:function(e,t){var r=new Mt.MathNode("mo",[new Mt.TextNode("\u203e")]);r.setAttribute("stretchy","true");var n=new Mt.MathNode("munder",[qt(e.body,t),r]);return n.setAttribute("accentunder","true"),n}}),lt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(e,t,r){throw new X("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(e,t){for(var r=en(e),n=[],i=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var o=r[a];"~"===o&&(o="\\textasciitilde"),n.push($e.makeSymbol(o,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return $e.makeSpan(["mord","text"].concat(i.sizingClasses(t)),$e.tryCombineChars(n),i)},mathmlBuilder:function(e,t){var r=new Mt.TextNode(en(e)),n=new Mt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var en=function(e){return e.body.replace(/ /g,e.star?"\u2423":"\xa0")},tn=at,rn="[ \r\n\t]",nn="\\\\[a-zA-Z@]+",an=new RegExp("^("+nn+")"+rn+"*$"),on="[\u0300-\u036f]",sn=new RegExp(on+"+$"),ln=(new RegExp("^"+nn),function(){function e(e){this.input=void 0,this.tokenRegex=void 0,this.input=e,this.tokenRegex=new RegExp("([ \r\n\t]+)|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff][\u0300-\u036f]*|[\ud800-\udbff][\udc00-\udfff][\u0300-\u036f]*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|\\\\[a-zA-Z@]+[ \r\n\t]*|\\\\[^\ud800-\udfff])","g")}return e.prototype.lex=function(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new a("EOF",new p(this,t,t));var r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new X("Unexpected character: '"+e[t]+"'",new a(e[t],new p(this,t,t+1)));var n=r[2]||" ",i=n.match(an);return i&&(n=i[1]),new a(n,new p(this,t,this.tokenRegex.lastIndex))},e}()),hn=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}var t=e.prototype;return t.beginGroup=function(){this.undefStack.push({})},t.endGroup=function(){if(0===this.undefStack.length)throw new X("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?delete this.current[t]:this.current[t]=e[t])},t.has=function(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)},t.get=function(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]},t.set=function(e,t,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];0<this.undefStack.length&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}this.current[e]=t},e}(),mn={},cn=mn;function un(e,t){mn[e]=t}un("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}}),un("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}}),un("\\@ifnextchar",function(e){var t=e.consumeArgs(3),r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}}),un("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),un("\\TextOrMath",function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var pn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};un("\\char",function(e){var t,r=e.popToken(),n="";if("'"===r.text)t=8,r=e.popToken();else if('"'===r.text)t=16,r=e.popToken();else if("`"===r.text)if("\\"===(r=e.popToken()).text[0])n=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new X("\\char` missing argument");n=r.text.charCodeAt(0)}else t=10;if(t){if(null==(n=pn[r.text])||t<=n)throw new X("Invalid base-"+t+" digit "+r.text);for(var i;null!=(i=pn[e.future().text])&&i<t;)n*=t,n+=i,e.popToken()}return"\\@char{"+n+"}"});var dn=function(e,t){var r=e.consumeArgs(1)[0];if(1!==r.length)throw new X("\\gdef's first argument must be a macro name");var n=r[0].text,i=0;for(r=e.consumeArgs(1)[0];1===r.length&&"#"===r[0].text;){if(1!==(r=e.consumeArgs(1)[0]).length)throw new X('Invalid argument number length "'+r.length+'"');if(!/^[1-9]$/.test(r[0].text))throw new X('Invalid argument number "'+r[0].text+'"');if(i++,parseInt(r[0].text)!==i)throw new X('Argument number "'+r[0].text+'" out of order');r=e.consumeArgs(1)[0]}return e.macros.set(n,{tokens:r,numArgs:i},t),""};un("\\gdef",function(e){return dn(e,!0)}),un("\\def",function(e){return dn(e,!1)}),un("\\global",function(e){var t=e.consumeArgs(1)[0];if(1!==t.length)throw new X("Invalid command after \\global");var r=t[0].text;if("\\def"===r)return dn(e,!0);throw new X("Invalid command '"+r+"' after \\global")});var fn=function(e,t,r){var n=e.consumeArgs(1)[0];if(1!==n.length)throw new X("\\newcommand's first argument must be a macro name");var i=n[0].text,a=e.isDefined(i);if(a&&!t)throw new X("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!a&&!r)throw new X("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var o=0;if(1===(n=e.consumeArgs(1)[0]).length&&"["===n[0].text){for(var s="",l=e.expandNextToken();"]"!==l.text&&"EOF"!==l.text;)s+=l.text,l=e.expandNextToken();if(!s.match(/^\s*[0-9]+\s*$/))throw new X("Invalid number of arguments: "+s);o=parseInt(s),n=e.consumeArgs(1)[0]}return e.macros.set(i,{tokens:n,numArgs:o}),""};un("\\newcommand",function(e){return fn(e,!1,!0)}),un("\\renewcommand",function(e){